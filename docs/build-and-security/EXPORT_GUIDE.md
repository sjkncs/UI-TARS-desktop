> **Fork Document**: This document was created as part of the community fork [sjkncs/UI-TARS-desktop](https://github.com/sjkncs/UI-TARS-desktop).
> Based on the original [bytedance/UI-TARS-desktop](https://github.com/bytedance/UI-TARS-desktop) project. All original code and IP belong to ByteDance.

# UI-TARS 对话导出功能使用指南

## 功能概述

UI-TARS 现已支持将对话历史、截图和代码导出到本地文件，方便保存和分享。

## 导出位置

所有导出的文件默认保存在：

- **Windows**: `C:\Users\<用户名>\AppData\Roaming\ui-tars-desktop\exports\`
- **macOS**: `~/Library/Application Support/ui-tars-desktop/exports/`
- **Linux**: `~/.config/ui-tars-desktop/exports/`

## 功能列表

### 1. 导出完整对话 (Export Conversation)

将整个对话历史导出为文档，支持三种格式：

#### Markdown 格式 (.md)
- 适合在 Typora、Obsidian 等 Markdown 编辑器中查看
- 截图以图片链接形式嵌入
- 支持代码高亮语法

**使用方法**:
1. 在对话页面点击"导出对话"按钮
2. 选择 Markdown 格式
3. 勾选"包含截图"和"包含时间戳"（可选）
4. 点击"导出"

**导出结构**:
```
conversation_2026-02-12T13-00-00/
├── conversation.md          # 对话文档
├── screenshot_0.png         # 截图文件
├── screenshot_1.png
└── ...
```

#### HTML 格式 (.html)
- 可在浏览器中直接打开查看
- 精美的样式排版
- 截图直接嵌入页面

**特点**:
- 响应式设计，支持移动端查看
- 深色/浅色主题自适应
- 用户消息和 AI 回复有不同颜色标识

#### JSON 格式 (.json)
- 原始数据格式
- 适合程序化处理和数据分析
- 包含完整的消息元数据

### 2. 单独保存截图 (Save Screenshot)

**使用方法**:
1. 在对话中找到包含截图的消息
2. 右键点击截图
3. 选择"保存截图"
4. 截图会自动保存并打开文件位置

**保存位置**: `exports/screenshots/screenshot_<时间戳>.png`

### 3. 单独保存代码块 (Save Code)

**使用方法**:
1. 在对话中找到代码块
2. 右键点击代码块
3. 选择"保存代码"或"复制代码"

**保存位置**: `exports/code/code_<时间戳>.<扩展名>`

**支持的语言扩展名**:
- JavaScript → `.js`
- TypeScript → `.ts`
- Python → `.py`
- Java → `.java`
- C++ → `.cpp`
- Go → `.go`
- Rust → `.rs`
- HTML → `.html`
- CSS → `.css`
- 其他 → `.txt`

## 使用示例

### 示例 1: 导出 Agent 执行记录

假设你使用 UI-TARS 完成了一个自动化任务，想保存完整的执行过程：

1. 打开对话历史页面
2. 点击"导出对话"
3. 选择 **HTML 格式**
4. 勾选"包含截图"和"包含时间戳"
5. 点击"导出"

导出后会自动打开文件夹，双击 `conversation.html` 即可在浏览器中查看完整的执行记录。

### 示例 2: 保存 AI 生成的代码

AI 帮你生成了一段 Java 代码：

1. 右键点击代码块
2. 选择"保存代码"
3. 代码会自动保存为 `code_<时间戳>.java`
4. 文件会自动打开，可直接在 IDE 中使用

### 示例 3: 分享截图给同事

在 Doc AI 工作区分析了一个文档，想分享截图：

1. 右键点击截图
2. 选择"保存截图"
3. 截图保存到 `exports/screenshots/` 文件夹
4. 通过邮件或聊天工具分享该图片

## 导出选项说明

### 包含截图 (Include Screenshots)
- ✅ 勾选：截图会保存为独立的 PNG 文件，并在文档中引用
- ❌ 不勾选：仅导出文本内容，不包含截图

### 包含时间戳 (Include Timestamps)
- ✅ 勾选：每条消息会显示发送时间
- ❌ 不勾选：不显示时间信息，文档更简洁

## 快捷操作

### 快速打开导出文件夹
1. 点击"导出对话"按钮
2. 点击"打开导出文件夹"
3. 文件资源管理器会打开 `exports` 目录

### 右键菜单快捷键
- **保存截图**: 右键 → 保存截图
- **保存代码**: 右键 → 保存代码
- **复制代码**: 右键 → 复制代码

## 文件命名规则

所有导出的文件都使用时间戳命名，格式为：

```
<类型>_<年-月-日T时-分-秒>.<扩展名>

示例:
- conversation_2026-02-12T13-45-30/
- screenshot_2026-02-12T13-45-30.png
- code_2026-02-12T13-45-30.py
```

这样可以避免文件名冲突，并且方便按时间排序查找。

## 注意事项

1. **截图格式**: 所有截图统一保存为 PNG 格式，保证最佳质量
2. **文件大小**: 如果对话包含大量截图，导出的文件夹可能较大
3. **权限问题**: 确保应用有写入用户数据目录的权限
4. **路径长度**: Windows 系统注意路径长度限制（最大 260 字符）

## 高级用法

### 批量导出多个对话

如果你有多个对话需要导出：

1. 分别打开每个对话
2. 使用"导出对话"功能
3. 每个对话会保存到独立的文件夹（按时间戳命名）

### 自定义导出位置

导出位置由系统决定，如需自定义：

1. 导出后打开 `exports` 文件夹
2. 将需要的文件夹移动到你想要的位置
3. 或者在文件资源管理器中创建快捷方式

### 与其他工具集成

#### 导入到 Notion
1. 导出为 Markdown 格式
2. 在 Notion 中选择"导入" → "Markdown"
3. 选择导出的 `.md` 文件

#### 导入到 Obsidian
1. 导出为 Markdown 格式
2. 将整个对话文件夹复制到 Obsidian vault
3. 截图会自动显示

#### 生成 PDF
1. 导出为 HTML 格式
2. 在浏览器中打开 `conversation.html`
3. 使用浏览器的"打印" → "另存为 PDF"

## 常见问题

### Q: 导出的文件在哪里？
A: 导出后会自动打开文件夹。也可以手动前往用户数据目录的 `exports` 文件夹。

### Q: 可以修改导出的文件吗？
A: 可以。导出的 Markdown 和 HTML 文件都可以用文本编辑器打开修改。

### Q: 截图质量如何？
A: 截图以原始分辨率保存为 PNG 格式，保证最佳质量。

### Q: 导出失败怎么办？
A: 检查：
1. 磁盘空间是否充足
2. 应用是否有写入权限
3. 路径是否过长（Windows）

### Q: 可以导出为 Word 格式吗？
A: 目前不直接支持。可以先导出为 Markdown，然后用 Pandoc 等工具转换为 Word。

## 技术细节

### 导出格式对比

| 格式 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| **Markdown** | 纯文本、易编辑、兼容性好 | 样式简单 | 文档编辑、版本控制 |
| **HTML** | 样式精美、浏览器直接打开 | 文件较大 | 分享、演示 |
| **JSON** | 结构化、易于程序处理 | 不适合人类阅读 | 数据分析、备份 |

### 零依赖实现

导出功能使用 Node.js 内置模块实现，无需额外依赖：
- 文件操作：`fs` 模块
- 路径处理：`path` 模块
- Base64 转换：`Buffer` 内置对象

## 更新日志

### v1.0.0 (2026-02-12)
- ✨ 新增对话导出功能（Markdown/HTML/JSON）
- ✨ 新增单独保存截图功能
- ✨ 新增单独保存代码块功能
- ✨ 新增右键菜单快捷操作
- ✨ 支持中英文界面
- ✨ 导出后自动打开文件夹

---

**提示**: 如有任何问题或建议，欢迎反馈！
